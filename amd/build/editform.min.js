define ("block_voice/editform",["jquery","core/log","core/ajax"],function(a,b,c){'use strict';function d(a,b){var c=this;c.instanceid=parseInt(a);c.rootel=b}d.prototype.main=function(){var b=this;b.rootel.on("change","select[name=\"config_survey\"]",function(){var c=a(this);b.loadQuestions(c.val())});b.rootel.on("change","input.question",function(){b.generateQuestionCSV()});b.rootel.find("select[name=\"config_survey\"]").change()};d.prototype.loadQuestions=function(a){var d=this;if(a){var e={instanceid:d.instanceid,surveyid:a};c.call([{methodname:"block_voice_editform_api",args:{action:"get_questions",data:JSON.stringify(e)},done:function done(a){d.rootel.find("#questions").html(a)},fail:function fail(a){b.debug(a)}}])}};d.prototype.generateQuestionCSV=function(){var b=this,c=b.rootel.find("input[name=\"config_questionscsv\"]"),d=[];b.rootel.find("input.question:checked").each(function(){d.push(a(this).val())});c.val(d.join())};return{init:function(c){b.debug("block_voice/editform: initializing");var e=a(".mform");if(!e.length){b.error("block_voice/editform: rootel '.mform' not found!");return}var f=new d(c,e);f.main()}}});
//# sourceMappingURL=editform.min.js.map
